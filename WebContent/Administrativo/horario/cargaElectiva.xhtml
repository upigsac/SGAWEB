   
    <ui:composition  template="/Administrativo/plantilla.xhtml" 
				      xmlns="http://www.w3.org/1999/xhtml"
				      xmlns:h="http://xmlns.jcp.org/jsf/html"
				      xmlns:f="http://xmlns.jcp.org/jsf/core"
				      xmlns:p="http://primefaces.org/ui"
				      xmlns:hp="http://xmlns.jcp.org/jsf/passthrough"
				      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
      
      		<ui:define name="titulo">
                CARGA HORARIO PERSONAL DOCENTE
            </ui:define>
            
            
            
<ui:define name="contenido">
          
    
        <style>
          
            .cabecera-dia{display: block;outline: 1px solid silver;width: 100%;background-color:rgb(16,108,200);color: white}
			.cabecera-dia div{display: table-cell;border: 1px solid silver;width: 13.6%;height: 100%;text-align: center;}
			.cabecera-dia div:FIRST-CHILD{width:63px;}
            .dia{display: table-cell;width: 13.6%;position: relative;outline:1px  solid silver;background: gainsboro;height: 900px}
            .dia li{outline: 1px solid silver;}
            
            .hora{width: 65px;display: table-cell;background-color:rgb(16,108,200)}
            .hora li {height: 60px;outline: 1px solid silver}
     
            .hora-padre{display: table;height: 100%;width: 100%;text-align: center;color: white}
            .hora-hijo{display: table-cell;vertical-align: middle}
            .celda{position: absolute;width: 100%;background-color: white;text-align: center;display: block;z-index: 2;border: 1px solid silver;font-size: 0.8em;transition:all 0.8s}
            .celda:hover{cursor: pointer}
            .celda div span{display: block}
            .ficha-aula{min-width: 80px;text-align: center;}
            .aula-ocupada{background-color: red;color: white;}
            .aula-select{background-color: orange;}
            .aula-select a{color: white!important;}

          	.ui-widget-content{background-color:  #eeeeee}
          	table .ui-datatable-odd, table .ui-datatable-even{background-color: white}

            
            
            table .ui-state-highlight{background: #1991F5 !important;}
            table .ui-datatable-odd{background: white}            
            
            .subDetalle table thead{font-size: 1.1em!important}
			.notify{ width: 250px;padding: 10px 5px;border-radius: 5px;color: white;z-index: 99999999}
	        .error{background-color: red}
	        .correcto{background-color: #008000}
	        
	       
			
        </style>
        <script>
        var bandera=false;
        var idGeneral;
        function loaded() {
            document.getElementById('tope').style.display = 'none';
        }
        function confirmacion(obj,cadena){
        	
            idGeneral=obj;
            if(bandera){
                $(".modal-fondo").remove();
                $(".modal").remove();
                bandera=false;
                return true;
            }else{
               if(! $('.modal-fondo').hasClass("modal-fondo")){
                   $('body').append('<div class="modal-fondo"  /> ');
                    $('body').append('<div class="modal" ><div class="modal-titulo" > INTRANET UPIG </div><div class="modal-cuerpo"> <div class="column modal-icono"><i class="fa fa-exclamation "  /></div><div class="column modal-texto"><span>' +cadena+'</span></div></div><hr/><div class="modal-botonera"><a  class="positivo"  onclick="valida(true)" >Si</a> <a class="negativo" onclick="valida(false)" > No</a></div>  </div>');
                    }else{
                    $(".modal-fondo").remove();
                    $(".modal").remove();
               }                    
                
                return false;
            }
            
        }
        
        function valida(estado){
            bandera=estado;           
            $(idGeneral).click();            
        }
        function notificacion(msg,speed,fadeSpeed,type){
            $('.notify').remove();

			  if (typeof fade != "undefined"){
			  clearTimeout(fade);
			  }
			  $('body').append('<div class="notify '+type+'" style="display:none;position:fixed;right:10px"><p>'+msg+'</p></div>');
			
			  notifyHeight = $('.notify').outerHeight();
			
			  $('.notify').css('top',-notifyHeight).animate({top:10,opacity:'toggle'},speed);
			
			  fade = setTimeout(function(){
			
			  $('.notify').animate({top:notifyHeight+10,opacity:'toggle'}, speed);
			
			  }, fadeSpeed);
			}
        
        
        
        $( "body" ).on("mouseenter",".celda",function() {
        	 
        	 $("[data-curso="+$(this).attr("data-curso")+"]").css({"background-color":"rgb(196, 217, 232)"});
            $(this).css({"z-index":"2"});
           
        });
        
        $( "body").on("mouseleave",".celda",function() {
          
          $("[data-curso="+$(this).attr("data-curso")+"]").css({"background-color":"white"});
          $(this).css({"z-index":"1"});
         
          
        });
        
        
        
        
        </script>
     
     
       
        <h:form id="frmDatos"  prependId="false" >
        #{cargaElectivaB.load(usuarioB.institucionS,usuarioB.periodoS)}
             <span class="tituto-admin">CARGA HORARIO DOCENTE</span>   

                
                <div class="column paneles" style="width: 49.0%" >
                   
                        <b>DATOS PERSONALES</b>
		                 <br />
		                    
		                <div class="column" style="width: 100px;height:100px;text-align: center;">
		                    <img src="SVerImagenAlumno?alumno=#{cargaElectivaB.persona.persona}"  style="display: block;height: 100%;width: 100%" />
		                    
		                </div>
		                  <div class="column">
		             
		                    <h:outputLabel value="NOMBRES"/>
		                    <h:outputText id="txtDocente" value="#{cargaElectivaB.persona.nombres}"   />
		                    <br />
		                    
		                     <h:outputLabel value="APELLIDOS"/>
		                     <h:outputText id="txtApellidos" value="#{cargaElectivaB.persona.paterno} #{cargaElectivaB.persona.materno}"   />
		                    <br/>
		                    
		                     <h:outputLabel value="D.N.I"/>
		                     <h:outputText id="txtNumero" value="#{cargaElectivaB.persona.numero_documento} "   />
		                    
		                    <br />
		                    <h:outputLabel value="E-MAIL" />
		                    <h:outputText value="#{cargaElectivaB.persona.emailP}" />
		                    <br />
		
		                    <h:outputLabel value="TELEFONO" />
		                    <h:outputText value="#{cargaElectivaB.persona.telefono}" />
		                    
		                     <h:outputLabel value="CELULAR" />
		                     <h:outputText value="#{cargaElectivaB.persona.celular}" />
		                    </div>
                    
                    
                  </div>  
                    
             
                    
                    
                  <div class="column paneles " style="width: 49.0%;height: 120px;position: relative;">
                        <b>HORAS CONTRATO</b>
                  	<br />
                    
                    <h:outputLabel  value="PERSONAL"/>
                    <h:outputText id="lblPersonal" value="#{cargaElectivaB.personal.personal}" style="color: #0069B3;font-weight: bold"/>
                    <br/>
                    <h:outputLabel  value="DOCENTE"/>
                    <h:outputText id="lblCpersonal" value="#{cargaElectivaB.personal.cPersonal}"  style="color: red;font-weight: bold"/>
                   	<br/>
                    <h:outputLabel value="HORAS SEMANA"/>

                    <b><h:outputText  value="#{registrotmB.mostrarTotalHorasProyectadas(cargaElectivaB.institucion, cargaElectivaB.periodo, cargaElectivaB.personal.personal)}" rendered="#{not empty cargaElectivaB.personal.personal}" style="font-size: 1.5em;color: #1991F5" /></b>
                    <br />
                    <h:outputLabel value="TOTAL HORAS"/>
                    <b><h:outputText  value="#{registrotmB.mostrarTotalHoras(cargaElectivaB.institucion, cargaElectivaB.periodo,'%', '%', '%', '%',cargaElectivaB.personal.personal)}" rendered="#{not empty cargaElectivaB.personal.personal}" style="font-size: 1.5em;color: crimson"/></b>
                    
                    <div style="position: absolute;bottom: 5px;right: 5px">
	                   
	                    <h:commandLink id="btGeneraDocenteI" title="Docente Invitado" styleClass="boton-normal" disabled="#{cargaElectivaB.persona.persona eq null?true:cargaElectivaB.personal.cPersonal ne null}" onclick="return confirmacion(this,'¿ Esta seguro generar Docente en modalidad de &lt;b style=color:red;> INVITADO &lt;/b>  en el año  &lt;b style=color:red;> #{cargaElectivaB.periodo} &lt;/b> ?');"  >
	                    <i class="fa fa-user-plus" />
	                     Invitado
	                    <f:ajax  execute="@this" render="lblCpersonal @this btGeneraDocenteC"  listener="#{cargaElectivaB.generarDocente(2)}" />
	                    </h:commandLink>
	                    <h:commandLink id="btGeneraDocenteC" title="Docente Contratado" styleClass="boton-normal" disabled="#{cargaElectivaB.persona.persona eq null?true:cargaElectivaB.personal.cPersonal ne null}" onclick="return confirmacion(this,'¿ Esta seguro generar Docente en modalidad de &lt;b style=color:red;>CONTRATADO &lt;/b> en el año &lt;b style=color:red;>#{cargaElectivaB.periodo} &lt;/b> ?');"  >
	                    <i class="fa fa-user-plus" />
	                     Contratado
	                    <f:ajax  execute="@this" render="lblCpersonal @this btGeneraDocenteI" listener="#{cargaElectivaB.generarDocente(1)}" />
	                    </h:commandLink>
                    </div>
                    
                    
  					</div>
  					<div class="paneles" >
  					
  					
                   
                       <h:commandLink styleClass="boton-normal"  onclick="dlgModal.show()" >
                            <i class="fa fa-search"  />
                            BUSQUEDA PERSONA
                            <f:ajax execute="@this"/>
                        </h:commandLink>
                          <h:commandLink  rendered="true"  styleClass="boton-normal"  onclick="dlgCargaElectivaSemestral.show()" >
                              
                            <i class="fa fa-calendar" />
                            CARGA ELECTIVA
                            <f:ajax execute="@form" render=":frmCargaElectivaTotal" listener="#{cursoSeccionDocenteB.mostrarCursoSeccionDocente(cargaElectivaB.institucion,cargaElectivaB.periodo,cargaElectivaB.personal.personal)}" />
                        </h:commandLink>
                        
                        
                        
                        <h:commandLink id="btHorarioPersonal" styleClass="boton-normal" disabled="#{cargaElectivaB.personal.personal eq null}" >
                        	<i class="fa fa-clock-o" />
                        	HORARIO DOCENTE 
                        <f:ajax execute="@this" render=":frmHorarioPersonalDocente:pnHorarioDocenteCabecera :frmHorarioPersonalDocente:pnHorarioDocenteCuerpo" listener="#{cargaElectivaB.mostrarHorarioPersonal}" />
                        </h:commandLink>
                        
                        
                       <h:commandLink id="btReprogramacion" styleClass="boton-normal" disabled="#{cargaElectivaB.personal.personal eq null}" >                       
                            <i class="fa fa-clock-o" />
                            REPROGRAMACION
                            <f:ajax  execute="@this" render=":frmRecuperacion:pnCursoSeccionDocente :frmRecuperacion:tbReprogramacion"  listener="#{cargaElectivaB.mostrarCursoSeccionDocente}" />
                        </h:commandLink>

                        <h:commandLink id="btHorarioSeccion"  disabled="#{empty cargaElectivaB.seccion}" styleClass="boton-normal"     >                       
                            <i class="fa fa-clock-o" />
                            HORARIO SECCION
                            
                            <f:ajax render=":frmHorarioSeccion " listener="#{cargaElectivaB.mostrarHorarioSeccion}"   />
                        </h:commandLink>
                    </div>
             
            
            <div class="paneles" >
            <b>CARGA ELECTIVA</b>
          	<br />
         
           

            <h:outputLabel value="CARRERA" />
            <h:selectOneMenu id="cbCarrera" value="#{cargaElectivaB.carrera}">
            <f:selectItem itemLabel="selecciona"/>
                <f:selectItems value="#{cargaElectivaB.carreraL}" var="carrera" itemValue="#{carrera.carrera}" itemLabel="#{carrera.descripcion}" />
                <f:ajax execute="@this" render="cbCiclo cbMalla"  listener="#{cargaElectivaB.mostrarMallaCiclo}" />
            </h:selectOneMenu>
            <h:outputLabel value="MALLA" />
            <h:selectOneMenu id="cbMalla" value="#{cargaElectivaB.malla}" >       
                <f:selectItem itemLabel="selecciona"/>
                <f:selectItems value="#{cargaElectivaB.horMallaCurricularL}" var="malla" itemValue="#{malla.malla}" itemLabel="#{malla.descripcion}"/>
                <f:ajax execute="@this" render="cbSeccion" listener="#{cargaElectivaB.mostrarSeccion}"  />
            </h:selectOneMenu>
            <br />
            <h:outputLabel value="CICLO" />
            <h:selectOneMenu id="cbCiclo" value="#{cargaElectivaB.nivelModular}">
                <f:selectItem itemLabel="selecciona"/>                
                <f:selectItems value="#{cargaElectivaB.cicloL}" var="ciclo" itemValue="#{ciclo.ciclo}" itemLabel="#{ciclo.ciclo} - #{ciclo.descripcion}" />
                <f:ajax execute="@this" render=" cbSeccion tbCargaElectiva" listener="#{cargaElectivaB.mostrarSeccion}"  />
            </h:selectOneMenu>
            <h:outputLabel value="TURNO" />
            <h:selectOneMenu id="cbturno" value="#{cargaElectivaB.turno}" >
                <f:selectItems value="#{turnoB.mostrarTurno}" var="turno" itemValue="#{turno.turno}" itemLabel="#{turno.descripcion}" />
                <f:ajax execute="@this" render="cbSeccion tbCargaElectiva" listener="#{cargaElectivaB.mostrarSeccion}" />
            </h:selectOneMenu>         
            <h:outputLabel value="SECCION" />
            <h:selectOneMenu id="cbSeccion" value="#{cargaElectivaB.seccion}" >
                <f:selectItem itemLabel="selecciona"/>
                <f:selectItems value="#{cargaElectivaB.seccionL}" var="itemSeccion" itemValue="#{itemSeccion.seccion}" itemLabel="#{itemSeccion.descripcion}"/>
                <f:ajax execute="@this" render=" btHorarioSeccion tbCargaElectiva" listener="#{cargaElectivaB.mostrarDetalleCarga}" onevent="onevent"   />
            </h:selectOneMenu>

            <br/>
            
             </div>
             <p:dataTable id="tbCargaElectiva" value="#{cargaElectivaB.cargaElectivaPersonalL}" var="itemCargaElectivaPersonal" rowIndexVar="status" >
             	<f:facet name="header">
             		Grupo:
             		<h:outputLabel value="#{cargaElectivaB.vencimiento.descripcion}" />
             		<br />
             		Fechas :
             		<h:outputLabel value="#{cargaElectivaB.seccionPeriodo.fechaInicio}  #{cargaElectivaB.seccionPeriodo.fechaFin}" />
             		
             	
             	</f:facet>
             
             
             	<p:column headerText="Nr." width="10">
             		#{status +1 } 
             	</p:column>
             	
             	<p:column headerText="CURSO" >
             	<span class="column" style="width: 20px;height: 20px;background-color: #{itemCargaElectivaPersonal.cursoSeccion.estadoRegistro eq 1 ?'blue':'red'}" />
             	<div class="column">
             		#{itemCargaElectivaPersonal.curso.curso}
             		<br /> 
             		#{itemCargaElectivaPersonal.curso.descripcion}
             		<br />
             		SECUNDARIO #{itemCargaElectivaPersonal.cursoSeccionSecundario.estadoRegistro}
             	</div>
             		
             	</p:column>
             	
             	<p:column headerText="CREDITO" width="50" style="text-align: center">
             		<b style="font-size:  2.0em">#{itemCargaElectivaPersonal.horMallaCurricularCursoAct.creditos}    </b>      	
             	</p:column>
             	
             	<p:column headerText="HORA TEORIA" width="50" style="text-align: center">
             		<b style="font-size:  2.0em">#{itemCargaElectivaPersonal.horMallaCurricularCursoAct.horasTeoria} </b>
             	</p:column>
             	
             	<p:column headerText="HORA PRACTICA" width="50" style="text-align: center">
             		<b style="font-size:  2.0em">#{itemCargaElectivaPersonal.horMallaCurricularCursoAct.horasPracticas} </b>
             	</p:column>
             	
             	
             	<p:column headerText="PERSONA" width="400" >
             		<h:panelGroup layout="block" rendered="#{itemCargaElectivaPersonal.cursoSeccionDocente.personal ne null}" >
             		<h:commandLink>
             		<h:graphicImage styleClass="column" value="SVerImagenAlumno?alumno=#{itemCargaElectivaPersonal.persona.persona}"  style="width:60px;height:60px;border: 1px solid silver" />
             			<f:ajax execute="@this" render=":frmDatos" listener="#{cargaElectivaB.seleccionImagen(itemCargaElectivaPersonal)}" />
             		</h:commandLink>
             		
             		<div class="column">
	             		#{itemCargaElectivaPersonal.cursoSeccionDocente.personal} 
	             		<br />
	             		#{itemCargaElectivaPersonal.persona.paterno}  #{itemCargaElectivaPersonal.persona.materno}  #{itemCargaElectivaPersonal.persona.nombres} 
	             		<br />
	             		CONTRATADO:  <b style="color:#{itemCargaElectivaPersonal.cursoSeccionDocente.estadoRegistro eq 59?'red':'green'}">  #{itemCargaElectivaPersonal.cursoSeccionDocente.estadoRegistro eq 59?'NO':'SI'}</b>
             		</div>
             		
             		
             		</h:panelGroup>
             		
             	
             		 
             	</p:column>
             	<p:column  headerText="BOTONERA" width="150" >
             	<h:panelGroup layout="block" rendered="#{itemCargaElectivaPersonal.cursoSeccion.estadoRegistro eq 1 }" >
             		<h:commandLink styleClass="boton-normal" title="INSERTAR DOCENTE" disabled="#{itemCargaElectivaPersonal.cursoSeccionDocente ne null}">
	             	<i class="fa fa-plus" style=";color: green" />
	             	<f:ajax  execute="@this" render="tbCargaElectiva" listener="#{cargaElectivaB.insertarCursoSeccionDocente(itemCargaElectivaPersonal.horMallaCurricularCursoAct)}" />
	             	</h:commandLink>
	             	
	             	<h:commandLink  styleClass="boton-normal"  title="Horario"  disabled="#{itemCargaElectivaPersonal.cursoSeccionSecundario.estadoRegistro eq 1?true: itemCargaElectivaPersonal.cursoSeccionDocente eq null}"    >
                            <i class="fa fa-clock-o" style="color: white" />
                            <f:ajax execute="@this" render=":frmCargarHoraria:imgfotoTM :frmCargarHoraria:txtCPersonalTM :frmCargarHoraria:txtPersonalTM  :frmCargarHoraria:lblDesPersonaTM :frmCargarHoraria:txtCarreraTM :frmCargarHoraria:txtCursoTM :frmCargarHoraria:txtTurnoTM :frmCargarHoraria:txtSeccionTM  :frmCargarHoraria:cbTipoHora :frmCargarHoraria:cbDia :frmCargarHoraria:txtFechaIni :frmCargarHoraria:txtFechaFin :frmCargarHoraria:txtAula :frmCargarHoraria:txtHoraInicio :frmCargarHoraria:txtHoraFin :frmCargarHoraria:tbCargaHorario"  listener="#{cargaElectivaB.mostrarRegistroPersonalHorario(itemCargaElectivaPersonal)}" />
                    </h:commandLink>
             	
             		<h:commandLink styleClass="boton-normal"  title="Eliminar"  disabled="#{itemCargaElectivaPersonal.cursoSeccionDocente.estadoRegistro ne 59}" onclick="return confirmacion(this,'¿ Al eliminar el registro tambien se cambiaran los registro programados a la fecha de hoy esta seguro?');"  >             
                            <i class="fa fa-times" style="color: red" />
                            <f:ajax execute="@this" render="tbCargaElectiva" listener="#{cargaElectivaB.eliminarCursoDocente(itemCargaElectivaPersonal)}" />
                    </h:commandLink>
             	
             	
             	</h:panelGroup>
	             	
             	</p:column>
             	
             </p:dataTable>
        </h:form>      


        <h:form id="frmCargarHoraria" prependId="false"> 
        <p:dialog id="dlgHorario"  widgetVar="dlgHorario" header="..: MANTENIMIENTO HORARIO :.." modal="true"  width="1000"  resizable="false"  closable="#{cargaElectivaB.bandera}"   > 
            
                <div class="paneles">
                    <div class="column" style="width: 120px;height:110px;border: 1px solid silver;position: relative;   ">                         
                        <h:graphicImage id="imgfotoTM" value="SVerImagenAlumno?alumno=#{cargaElectivaB.cargaElectivaPersonal.persona.persona}"  style="width:100%; height:100%" />
                         <h:outputLabel id="txtCPersonalTM" value="#{cargaElectivaB.cargaElectivaPersonal.personal.cPersonal}" style="position:absolute;bottom: 0;background-color:rgba(0,0,0,0.6);color:white;display: block;    width: 100%;    text-align: center;" />
                    </div>

                    <div class="column" style=";width: 580px;height: 100%;">
                        
                        <h:outputLabel value="PERSONAL" />
                        <h:outputText id="txtPersonalTM" value="#{cargaElectivaB.cargaElectivaPersonal.personal.personal}" />
                        <br />
                        <h:outputLabel value="NOMBRES" />
						<h:outputText id="lblDesPersonaTM" value="#{cargaElectivaB.cargaElectivaPersonal.persona.nombreCompletos()}" />
                        <br />
                        <h:outputLabel value="CARRERA" />

                        <h:outputText id="txtCarreraTM" value="#{cargaElectivaB.cargaElectivaPersonal.cursoSeccion.carrera}" />

                        <br />
                        <h:outputLabel value="CURSO" />                    
                        <h:outputText id="txtCursoTM" value="#{cargaElectivaB.cargaElectivaPersonal.curso.curso} - #{cargaElectivaB.cargaElectivaPersonal.curso.descripcion}" />

                        <br />

                        <h:outputLabel value="SECCION" />   
                        <h:outputText  id="txtSeccionTM"  value="#{cargaElectivaB.seccion}" /> - <h:outputText  id="txtTurnoTM" value="#{turnoB.mostrarTurno(cargaElectivaB.turno).descripcion}" />
                    </div>
                </div>
                
                <h:panelGroup id="pnDatosHorario" layout="block" styleClass="paneles" >
                
                    
                    <h:outputLabel value="Dia" />                        
                    <h:selectOneMenu id="cbDia" value="#{cargaElectivaB.registrotm.dia}" disabled="#{cargaElectivaB.bandera}" required="true" style="width:185px">
                        <f:selectItem itemLabel="Lunes" itemValue="1"/>    
                        <f:selectItem itemLabel="Martes" itemValue="2"/>    
                        <f:selectItem itemLabel="Miercoles" itemValue="3"/>    
                        <f:selectItem itemLabel="Jueves" itemValue="4"/>    
                        <f:selectItem itemLabel="Viernes" itemValue="5"/>    
                        <f:selectItem itemLabel="Sabado" itemValue="6"/>    
                        <f:selectItem itemLabel="Domingo" itemValue="7"/> 
                        <f:ajax execute="@this" />   
                    </h:selectOneMenu>
                    <br />
                    <h:outputLabel value="Fecha Inicio"  />
                    <p:calendar  id="txtFechaIni"  value="#{cargaElectivaB.registrotm.fecha_inicio}" pattern="dd-MM-yyyy" disabled="#{cargaElectivaB.bandera}" required="true" mindate="#{cargaElectivaB.seccionPeriodo.fechaInicio}" mask="true" maxdate="#{cargaElectivaB.seccionPeriodo.fechaFin}" >
                        <p:ajax event="dateSelect"  update="txtFechaFin " />
                    </p:calendar>
                    <br />
                    <h:outputLabel value="Fecha Fin" />
                    <p:calendar id="txtFechaFin" value="#{cargaElectivaB.registrotm.fecha_fin}" pattern="dd-MM-yyyy" mindate="#{cargaElectivaB.registrotm.fecha_inicio}" maxdate="#{cargaElectivaB.seccionPeriodo.fechaFin}" mask="true" disabled="#{cargaElectivaB.bandera}" required="true" >
                    	<p:ajax event="dateSelect" />
                    </p:calendar>
                    <br />
                       <h:outputLabel value="Tipo Hora" />      
                    <h:selectOneMenu id="cbTipoHora" value="#{cargaElectivaB.registrotm.tipoHora}" required="true" disabled="#{cargaElectivaB.bandera}">
                        <f:selectItem itemLabel="--Selecciona--" />
                        <f:selectItems value="#{cargaElectivaB.tipoHoraL}" var="tipoHora" itemLabel="#{tipoHora.descripcion} - #{tipoHora.duracion}" itemValue="#{tipoHora.tipoHora}" />
                        <f:ajax execute="@this" render="brTiempo " />
                    </h:selectOneMenu>
                    <br/>

                    <div style="border: 1px solid silver;height: 60px;padding: 10px 0px  5px;margin: 10px 0px;">
                        <div style="display: inline-block;vertical-align: top;width: 150px;height: 100%;text-align: center;">
                            <h:outputLabel value="HORA INICIO" /><br/>

                            <p:calendar id="txtHoraInicio" value="#{cargaElectivaB.registrotm.hora_inicio}" required="true" pattern="HH:mm" timeOnly="true" showButtonPanel="true" disabled="#{cargaElectivaB.bandera}" mask="true"  size="5" minHour="6"   stepMinute="5" >
                                <p:ajax event="dateSelect"   update="txtHoraFin"   />
                            </p:calendar>
                        </div>
                        <div style="display: inline-block;vertical-align: top;width: 630px;height: 100%">
                            <h:inputText id="txt1"  value="#{cargaElectivaB.minutos}" style="width: 100%;text-align: center;border: none" />                    
                            <p:slider id="brTiempo" for="txt1"  step="#{tipoHoraB.mostrarTipoHora(cargaElectivaB.registrotm.tipoHora).duracion}" maxValue="1000"  disabled="#{cargaElectivaB.bandera}"  >
                                <p:ajax event="slideEnd" listener="#{cargaElectivaB.onSlideEnd}" update="txtHoraFin" />
                            </p:slider>
                        </div>
                        <div style="display: inline-block;vertical-align: top;width: 150px;height: 100%;text-align: center;">

                            <h:outputLabel value="HORA FIN" /><br/>
                            <p:calendar id="txtHoraFin" value="#{cargaElectivaB.registrotm.hora_fin}"  required="true"  pattern="HH:mm" timeOnly="true" showButtonPanel="true" disabled="#{cargaElectivaB.bandera}" mask="true"  size="5" minHour="#{cargaElectivaB.registrotm.hora_inicio.hours}"   stepMinute="5" >
                              
                            </p:calendar>
                            
                            
                        </div>
                    </div>
                    
                    
                    
                     <h:outputLabel value="Aula" />
                    
                    <h:commandLink  id="txtAula" title="Mostrar aulas"  disabled="#{cargaElectivaB.bandera}"    >
                    	
                    	<b>#{cargaElectivaB.registrotm.aula eq null ?'Vacio':cargaElectivaB.registrotm.aula}</b>
                        <f:ajax execute="@this cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin" render=":frmAulas txtFechaIni txtFechaFin txtHoraInicio txtHoraFin" listener="#{cargaElectivaB.mostrarAula}" />
                    </h:commandLink>
                    
                </h:panelGroup>
               
              

                <p:dataTable id="tbCargaHorario" value="#{cargaElectivaB.registrotmL}" var="detalleH" rowIndexVar="status" scrollable="true" scrollHeight="100" selection="#{cargaElectivaB.registrotm}" selectionMode="single" rowKey="#{detalleH.id}" disabledSelection="#{not cargaElectivaB.bandera}" emptyMessage="" >
                    <p:ajax event="rowSelect"  update=":frmCargarHoraria:cbTipoHora :frmCargarHoraria:cbDia :frmCargarHoraria:txtFechaIni :frmCargarHoraria:txtFechaFin :frmCargarHoraria:txtHoraInicio :frmCargarHoraria:txtHoraFin :frmCargarHoraria:txtAula :frmCargarHoraria:btEditar" />
                    <p:column headerText="N" width="10">
                        #{status +1 }
                    </p:column>

                    <p:column headerText="Fecha Inicio" width="60" >
                        <h:outputLabel  value="#{detalleH.fecha_inicio}">
                        <f:convertDateTime  pattern="dd-MM-yyyy" />
                        </h:outputLabel>
                    </p:column>

                    <p:column headerText="Fecha Final" width="60" >
                        <h:outputLabel  value="#{detalleH.fecha_fin}">
                        	<f:convertDateTime  pattern="dd-MM-yyyy" />
                        </h:outputLabel>
                    </p:column>
                    
                    <p:column headerText="Dia" >                        
                        #{utilB.listaDiasSemanaNormal[detalleH.dia -1 ]}
                    </p:column>
                    
                    <p:column headerText="Hora Ingreso" width="50"  >                        
                        #{utilB.convertTimes(detalleH.hora_inicio)}
                    </p:column>
                    
                    <p:column headerText="Hora Salida" width="50" >
                        #{utilB.convertTimes(detalleH.hora_fin)}
                    </p:column>                    
                    <p:column headerText="Horas" width="30" >                        
                        #{(((utilB.dateIff(utilB.convertDateTime(detalleH.hora_inicio),utilB.convertDateTime(detalleH.hora_fin)))/60000)/tipoHoraB.mostrarTipoHora(detalleH.tipoHora).duracion)}
                    </p:column>
                    <p:column headerText="Turno" width="40">
                        #{turnoB.mostrarTurno(detalleH.turno).descripcion}
                    </p:column>
                    <p:column headerText="Seccion" width="60"  >
                        #{detalleH.seccion}
                    </p:column>

                    <p:column headerText="Aula" width="50">
                        #{detalleH.aula}
                    </p:column>
                    

                    <p:column headerText="" width="40" >
                        <h:commandLink title="Activar" rendered="#{detalleH.estadoRegistro ne 1}" >
                        	<i class="fa fa-check" style="color:green" />
                            <f:ajax execute="@this" render="tbCargaHorario" listener="#{cargaElectivaB.eliminarCargaHoraria(detalleH)}" />
                        </h:commandLink>
                        <h:commandLink title="eliminar" rendered="#{detalleH.estadoRegistro eq 1}"  >
                        	<i class="fa fa-times" style="color:red" />
                            <f:ajax execute="@this" render="tbCargaHorario" listener="#{cargaElectivaB.eliminarCargaHoraria(detalleH)}" />
                        </h:commandLink>
                    </p:column>
                </p:dataTable>
                 
                <f:facet name="footer">
                <div>
                
                
       
                    <h:commandLink styleClass="boton-normal"  id="btNuevo" disabled="#{not cargaElectivaB.bandera}"  >
                        <i class="fa fa-file-text-o" />
                        Nuevo
                        <f:ajax execute="@this" render="cbTipoHora cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin txtAula tbCargaHorario btNuevo btEditar  btIngresar btCancelar btSalir  " listener="#{cargaElectivaB.nuevo}"  />
                    </h:commandLink>
                    <h:commandLink styleClass="boton-normal"  id="btEditar"  disabled="#{cargaElectivaB.registrotm eq null ?true:not cargaElectivaB.bandera}" >
                        <i class="fa fa-pencil" /> 
                        Editar
                        <f:ajax render="cbTipoHora cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin txtAula tbCargaHorario btNuevo btEditar  btIngresar btCancelar btSalir " listener="#{cargaElectivaB.editar}" />
                    </h:commandLink>
                    <h:commandLink styleClass="boton-normal"  id="btIngresar" disabled="#{cargaElectivaB.bandera}" >
                        <i class="fa fa-floppy-o"/>
                        Ingresar
                        <f:ajax execute="cbTipoHora cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin txtAula" render="cbTipoHora cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin txtAula tbCargaHorario btNuevo btEditar  btIngresar btCancelar btSalir " listener="#{cargaElectivaB.ingresarCargaHoraria}"  />
                    </h:commandLink>
                    <h:commandLink styleClass="boton-normal"  id="btCancelar" disabled="#{cargaElectivaB.bandera}" >
                        <i class="fa fa-reply" />
                        Cancelar
                        <f:ajax render="cbTipoHora cbDia txtFechaIni txtFechaFin txtHoraInicio txtHoraFin txtAula tbCargaHorario btNuevo btEditar  btIngresar btCancelar btSalir " listener="#{cargaElectivaB.cancelarTM}" resetValues="true" />
                    </h:commandLink>
                    <h:commandLink styleClass="boton-normal"  id="btSalir" onclick="dlgHorario.hide()" disabled="#{not cargaElectivaB.bandera}" >
                        <i class="fa fa-sign-out" />
                        
                        Salir
                        <f:ajax  execute="@this"/>
                    </h:commandLink>
                    
                         </div>
              </f:facet>
        </p:dialog>
 </h:form> 
 <h:form id="frmBusquedaPersonal">
        <p:dialog widgetVar="dlgModal" width="650px"     header="..: BUSQUEDA DE PERSONAL :.."  closeOnEscape="true" modal="true" resizable="false">
           <div class="paneles">
           <label for="txtbus_paterno">PATERNO</label>
                <h:inputText id="txtbus_paterno" value="#{personaB.busPaterno}" >
                    <f:ajax execute="@this" render="tbBusqueda" />
                </h:inputText><br/>
                <label for="txtbus_materno">MATERNO</label>
                <h:inputText id="txtbus_materno" value="#{personaB.busMaterno}" >
                    <f:ajax execute="@this" render="tbBusqueda" />
                </h:inputText><br/>
                <label for="txtbus_nombres">NOMBRES</label>
                <h:inputText id="txtbus_nombres" value="#{personaB.busNombres}" >
                    <f:ajax execute="@this" render="tbBusqueda " />
                </h:inputText>
           
           </div>
                
              
                <p:dataTable id="tbBusqueda"  value="#{personaB.filtroPersona(personaB.busPaterno, personaB.busMaterno, personaB.busNombres)}" var="detalle" selection="#{cargaElectivaB.persona}" selectionMode="single" scrollable="true" scrollHeight="350" rowKey="#{detalle.persona}" emptyMessage="No hay resultados"   rowIndexVar="status"  >
                    <p:ajax event="rowSelect"   update=":frmDatos btHorarioPersonal" listener="#{cargaElectivaB.onRowSelect}"    oncomplete="dlgModal.hide()"  /> 
                    <p:column headerText="Nro"  width="10"  >
                        #{status+1}
                    </p:column>
                    <p:column headerText="PERSONAL"  width="320"  >
                        #{detalle.nombreCompletos()}
                    </p:column>

                    <p:column headerText="TELEFONO"  width="80"  >
                        #{detalle.telefono}
                    </p:column>
                    
                </p:dataTable>
              
           
              <f:facet name="footer">
                        <div style="display: block;text-align: right">
                            <h:commandLink onclick="dlgModal.hide()">
                            SALIR
                            <f:ajax execute="@this" />
                        </h:commandLink>
                        </div>
                        
              </f:facet>
        </p:dialog>
 </h:form>
  <h:form id="frmAulas" prependId="false">
        <p:dialog widgetVar="dlgAulas" header="..: REGISTRO DE AULA :.."  width="800" modal="true" closeOnEscape="true"  resizable="false" >
          
				<div class="paneles">
					
					<h:outputLabel  value="SECCION:" />
					<b>#{cargaElectivaB.cursoSeccion.seccion} </b>
					<br />
					 
					<h:outputLabel value="MATRICULADOS:" />
					<b>#{cargaElectivaB.cursoSeccion.vacantesActuales}</b>
					
					
					<div class="paneles" >
						<h:outputLabel  >
						AULA LIBRE
						</h:outputLabel>
						
						<h:outputLabel  >
						<i class="fa fa-ban" />
						AULA OCUPADA
						</h:outputLabel>
						
						<h:outputLabel  >
						AULA RECOMENDADA
						</h:outputLabel>
					
					
					</div>
				</div>
				
				<div class="paneles" style="height: 500px;overflow: auto;" >
				<h:panelGroup  layout="block" id="pnAula" > 			
						<ui:repeat  value="#{cargaElectivaB.aulaL}" var="itemAula">
						<div class="ficha-aula paneles column #{itemAula.estadoRegistro eq 1?'aula-ocupada':'aula-libre'} #{cargaElectivaB.aula eq itemAula?'aula-select':''}" >
							<h:commandLink disabled="#{itemAula.estadoRegistro eq 1}">
									<span >#{itemAula.descripcion}</span>							 
		                            <br/>
		                            <b>#{itemAula.capacidad} </b>
		                                 
							<f:ajax execute="@this" render=":frmAulas:pnAula :frmAulas:btAceptarA :frmAulas:btHorarioA" listener="#{cargaElectivaB.seleccionAula(itemAula)}" />
							</h:commandLink>
						</div>
						
						</ui:repeat>
					</h:panelGroup>
				</div>
             <f:facet name="footer">
                        <div style="display: block;text-align: right">
                        
                        <h:commandLink id="btHorarioA" styleClass="boton-verde" disabled="#{cargaElectivaB.aula eq null}" >
                            HORARIO
                            <f:ajax execute="@this" render=":frmHorarioAula:pnHorarioAulaCabecera :frmHorarioAula:pnHorarioAulaCuerpo" listener="#{cargaElectivaB.mostrarHorarioAula}"   />
                        </h:commandLink>
                        
                        
                        
                        <h:commandLink id="btAceptarA" styleClass="boton-verde" disabled="#{cargaElectivaB.aula eq null}" >
                            ACEPTAR
                            <f:ajax execute="@this" render=":frmCargarHoraria:txtAula"  listener="#{cargaElectivaB.ingresarAula}"  />
                        </h:commandLink>
                        
                        
                            <h:commandLink styleClass="boton-rojo" onclick="dlgAulas.hide()">
                            CANCELAR
                            <f:ajax execute="@this" />
                        </h:commandLink>
                        </div>
                            </f:facet>
        </p:dialog>

</h:form>





        <p:dialog widgetVar="dlgCargaElectiva" width="900" height="650" header="CARGA PROYECTADA" modal="true">
            <h:form id="frmDetalleCargaElectiva">
                <p:dataTable id="tbCargaProyectada" value="#{cargaElectivaB.detalleCargaElectivaL}" var="detalleCE" rowIndexVar="status" emptyMessage="">
                    <p:column headerText="" >                                       
                        <span style="display: block;width: 20px;height: 20px;background-color: #{detalleCE.estadoRegistro eq 1?'blue':detalleCE.estadoRegistro eq 2?'red':'green'}" />
                    </p:column>
                    <p:column headerText="N">
                        #{status + 1}
                    </p:column>
                    <p:column headerText="FECHA">
                        #{detalleCE.fecha}
                    </p:column>
                    <p:column headerText="DIA">
                        #{utilB.listaDiasSemanaNormal[detalleCE.dia-1]}
                    </p:column>
                    <p:column headerText="HORA INICIO">
                        #{detalleCE.hora_inicio}
                    </p:column>
                    <p:column headerText="HORA FIN">
                        #{detalleCE.hora_fin}
                    </p:column>
                    <p:column headerText="GRUPO">
                        #{detalleCE.grupo}
                    </p:column>
                    <p:column headerText="SEMANA">
                        #{detalleCE.semana}
                    </p:column>
                    <p:column headerText="DESCRIPCION">
                        #{detalleCE.descripcion}
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgCargaElectivaSemestral" width="1200" height="600" header="CARGA ELECTIVA SEMESTRAL">
            <h:form id="frmCargaElectivaTotal">

                <p:dataTable id="tbSemestral" value="#{cursoSeccionDocenteB.cursoSeccionDocenteL}" var="detalleCargaSemestral" emptyMessage="" 
                             style="text-align: center;">
                    <p:column style="width:1%">  
                        <p:rowToggler />  
                    </p:column> 
                    <p:column headerText="INSTITUCION">
                        #{institucionB.mostrarInstitucionCodigo(detalleCargaSemestral.institucion).descripcion}
                    </p:column>
                    <p:column headerText="PERIODO">
                        #{detalleCargaSemestral.periodo}
                    </p:column>
                    <p:column headerText="MALLA">
                        #{detalleCargaSemestral.malla}
                    </p:column>
                    <p:column headerText="CARRERA">
                        #{carreraB.mostrarCarreraCodigo(detalleCargaSemestral.carrera).descripcion}
                    </p:column>
                    <p:column headerText="TURNO">
                        #{turnoB.mostrarTurno(seccionPeriodoB.mostrarSeccionPeriodo(detalleCargaSemestral.institucion, detalleCargaSemestral.periodo, detalleCargaSemestral.carrera, detalleCargaSemestral.seccion).turno).descripcion}
                    </p:column>
                    <p:column headerText="CICLO">
                        #{utilB.listaCiclos[seccionPeriodoB.seccionPeriodo.nivelModular-1]}
                    </p:column>
                    <p:column headerText="CURSO">       
                        #{detalleCargaSemestral.curso}<br />
                        #{cursoB.mostrarCurso(detalleCargaSemestral.curso).descripcion}
                    </p:column>
                    <p:column headerText="SECCION">
                        #{detalleCargaSemestral.seccion}
                    </p:column>
                    <p:column headerText="TOTAL HORAS">
                        #{detalleCargaSemestral.hora_practica + detalleCargaSemestral.hora_teoria}
                    </p:column>
                    <p:column headerText="TOTAL FERIADOS">
                        <h:commandLink id="lblFeriados" value="#{feriadoB.mostrarTotalFeriado(cargaElectivaB.institucion, detalleCargaSemestral.periodo, cargaElectivaB.personal.personal, detalleCargaSemestral.carrera, detalleCargaSemestral.curso, detalleCargaSemestral.seccion)}" style="color: red"  > 
                            <f:ajax execute="@this" render="pnFeriados"  listener="#{feriadoB.mostrarFeriados(cargaElectivaB.institucion, detalleCargaSemestral.periodo, cargaElectivaB.personal.personal, detalleCargaSemestral.carrera, detalleCargaSemestral.curso, detalleCargaSemestral.seccion)}" />
                        </h:commandLink>
                        <p:overlayPanel id="imgPanel" for="lblFeriados" showCloseIcon="true"  >
                            <h:panelGroup layout="block" id="pnFeriados">
                                <ui:repeat value="#{feriadoB.feriadosL}" var="feriados" >
                                    #{feriados.descrpcion} <br/>
                                </ui:repeat>
                            </h:panelGroup>


                        </p:overlayPanel>
                    </p:column>

                    <p:column headerText="HORAS ASIGNADAS">
                        #{registrotmB.mostrarTotalHoras(cargaElectivaB.institucion, detalleCargaSemestral.periodo,detalleCargaSemestral.malla,detalleCargaSemestral.carrera, detalleCargaSemestral.curso, detalleCargaSemestral.seccion,cargaElectivaB.personal.personal)}
                    </p:column>
                    <p:column headerText="HORAS PROYECTADAS">
                        <h:commandLink value="TRABANDO" onclick="dlgCargaElectiva.show()">
                            <f:ajax render=":frmDetalleCargaElectiva" listener="#{cargaElectivaB.mostrarCargaElectiva(detalleCargaSemestral.institucion,detalleCargaSemestral.periodo,detalleCargaSemestral.malla,detalleCargaSemestral.carrera,detalleCargaSemestral.seccion,detalleCargaSemestral.curso)}" />
                        </h:commandLink>


                    </p:column>
                    <p:column headerText="ESTADO">
                        #{detalleCargaSemestral.estadoRegistro}
                    </p:column>
                    <p:rowExpansion styleClass="subDetalle" >

                        <p:dataTable id="tbDetalleSemestral"  value="#{registrotmB.mostrarRegistrotm(detalleCargaSemestral.institucion, detalleCargaSemestral.periodo, detalleCargaSemestral.carrera, detalleCargaSemestral.curso, detalleCargaSemestral.seccion, cargaElectivaB.personal.personal)}" var="subDetalle" emptyMessage="">
                            <p:column headerText="DIA">
                                #{utilB.listaDiasSemanaNormal[subDetalle.dia -1]}
                            </p:column>
                            <p:column headerText="HORA INICIO">
                                #{subDetalle.hora_inicio}
                            </p:column>
                            <p:column headerText="HORA TERMINO">
                                #{subDetalle.hora_fin}
                            </p:column>
                            <p:column headerText="SUB TOTAL">

                            </p:column>
                            <p:column headerText="AULA">
                                #{subDetalle.aula}
                            </p:column>
                            <p:column headerText="ESTADO">
                                #{subDetalle.estadoRegistro}
                            </p:column>
                        </p:dataTable>
                    </p:rowExpansion>
                </p:dataTable>
            </h:form>
        </p:dialog>




<h:form id="frmHorarioAula" prependId="false">





        <p:dialog widgetVar="dlgHorarioAula" header="..: HORARIO DE AULA :.." width="1500"   modal="true" resizable="false" closeOnEscape="true">
            <div  class="paneles" >
     			<h:commandLink   class="boton-normal" title="ANTERIOR">
                    <i class="fa fa-chevron-left"/>
                    Anterior
                    <f:ajax execute="@this" render="pnHorarioAulaCabecera pnHorarioAulaCuerpo"  listener="#{cargaElectivaB.anteriorA}" />
                </h:commandLink>
                
                <h:commandLink   class="boton-normal" title="SIGUIENTE">
                    <i class="fa fa-chevron-right"/>
                    Siguiente
                    <f:ajax execute="@this" render="pnHorarioAulaCabecera pnHorarioAulaCuerpo" listener="#{cargaElectivaB.siguienteA}" />
                </h:commandLink>
      </div>
      <div class="paneles" >
      
      
      <h:panelGroup layout="block" id="pnHorarioAulaCabecera"  >      
				       <div class="cabecera-dia"   >
				        <div  ><i class="fa fa-clock-o" style="font-size: 1.7em;"/></div>
      				  		<ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
	                   
	                        <div   class="#{dia.feriadosL.size() eq 0?'':'FERIADO'}" >                          
	                        <span style="display: block;">#{utilB.listaDiasSemana[dia.dia]}</span>
	                        <span style="display: block;"><h:outputLabel value="#{dia.fecha}" >  <f:convertDateTime  pattern="dd/MM/yyyy" /> </h:outputLabel>  </span>                    
	                       
	                    	</div>
	                  
         			</ui:repeat>
        			</div>
        </h:panelGroup>
        			
       <div style="width: 100%;height: 520px;overflow-x:auto ">	
        		
        	<h:panelGroup layout="block" id="pnHorarioAulaCuerpo" style="display:block;"  >   
        	
        		
      			<ul class="hora" >
                   
                        <li ><div class="hora-padre"><div class="hora-hijo">8:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">9:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">10:00</div></div></li>
                        <li><div class="hora-padre"><div class="hora-hijo">11:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">12:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">13:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">14:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">15:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">16:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">17:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">18:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">19:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">20:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">21:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">22:00</div></div></li>
      			</ul>
                
		                 <ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
		                    <div class="dia" >
		                        
		                   
		                  	<ui:repeat value="#{dia.horarioCuerpoL}" var="horario">
		                      <div style="height: #{horario.alto}px;top: #{horario.top}px;" class="celda #{horario.desTipoClase}" data-curso="#{horario.curso}" title="#{horario.desTipoClase}"  >
		                            <div  style="display: table;height: 100%;width: 100%;z-index: 1">
		                                <div  style="display: table-cell;vertical-align: middle">
		                                    <span style="color: #008000">#{horario.desCarrera}</span>
		                                    <span ><b>#{horario.desCurso}</b> </span>
		                                    <span>#{horario.desPersona}</span>
		
		                                    <span style="color: red">  #{utilB.convertTimes(horario.horaInicio)} - #{utilB.convertTimes(horario.horaFinal)}</span>
		                                    <span>#{horario.seccion}</span>
		                                </div>                                
		                            </div>
		                        </div>
		                        
		                    </ui:repeat> 
		                   
		                  </div>
		                </ui:repeat>
                </h:panelGroup>	
                </div>
               
      
    		
			 </div>
			 <f:facet name="footer">
                        <div style="display: block;text-align: right">
                            <h:commandLink onclick="dlgHorarioAula.hide()">
                            SALIR
                            <f:ajax execute="@this" />
                        </h:commandLink>
                        </div>
                        
              </f:facet>      

        </p:dialog>

</h:form>

   <h:form id="frmHorarioSeccion" prependId="false" >
        <p:dialog widgetVar="dlgHorarioSeccion" header="..: HORARIO DE SECCION :.." width="1500"   modal="true" resizable="false" closeOnEscape="true" >
   			<div  class="paneles" >
   				
   			
   			
   			<div class="column">
   			<h:commandLink   class="boton-normal" title="ANTERIOR">
                    <i class="fa fa-chevron-left"/>
                   
                    <f:ajax execute="@this" render="pnHorarioSeccionCabecera pnHorarioSeccionCuerpo lblCronogramaAcademico lblSemana"  listener="#{cargaElectivaB.anteriorS}" />
                </h:commandLink>
                
                <h:commandLink   class="boton-normal" title="SIGUIENTE">
                    <i class="fa fa-chevron-right"/>
                    
                    <f:ajax execute="@this" render="pnHorarioSeccionCabecera pnHorarioSeccionCuerpo lblCronogramaAcademico lblSemana" listener="#{cargaElectivaB.siguienteS}" />
                </h:commandLink>
   			</div>
     			
                <div class="column">
                <h:outputLabel id="lblCronogramaAcademico" value="#{cargaElectivaB.cronogramaAcademico.descripcion}" /><br />
                <h:outputLabel id="lblSemana" value="#{cargaElectivaB.cronogramaAcademico.semana}" />
                </div>
                
      		</div>
      <div class="paneles" >
      
      
      <h:panelGroup layout="block" id="pnHorarioSeccionCabecera"  >      
				       <div class="cabecera-dia"   >
				        <div  ><i class="fa fa-clock-o" style="font-size: 1.7em;"/></div>
      				  		<ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
	                   
	                        <div   class="#{dia.feriadosL.size() eq 0?'':'FERIADO'}" >                          
	                        <span style="display: block;">#{utilB.listaDiasSemana[dia.dia]}</span>
	                        <span style="display: block;"><h:outputLabel value="#{dia.fecha}" >  <f:convertDateTime  pattern="dd/MM/yyyy" /> </h:outputLabel>  </span>                    
	                       
	                    	</div>
	                  
         			</ui:repeat>
        			</div>
        </h:panelGroup>
        			
       <div style="width: 100%;height: 520px;overflow-x:auto ">	
        		
        	<h:panelGroup layout="block" id="pnHorarioSeccionCuerpo" style="display:block;"  >   
        	
        		
      			<ul class="hora" >
                   
                        <li ><div class="hora-padre"><div class="hora-hijo">8:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">9:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">10:00</div></div></li>
                        <li><div class="hora-padre"><div class="hora-hijo">11:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">12:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">13:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">14:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">15:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">16:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">17:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">18:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">19:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">20:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">21:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">22:00</div></div></li>
      			</ul>
                
		                 <ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
		                    <div class="dia" >
		                        
		                   
		                  	<ui:repeat value="#{dia.horarioCuerpoL}" var="horario">
		                      <div style="height: #{horario.alto}px;top: #{horario.top}px;" class="celda #{horario.desTipoClase}" data-curso="#{horario.curso}" title="#{horario.desTipoClase}"  >
		                            <div  style="display: table;height: 100%;width: 100%;z-index: 1">
		                                <div  style="display: table-cell;vertical-align: middle">
		                                    <span style="color: green">#{horario.desCarrera}</span>
		                                    <span ><b>#{horario.desCurso}</b> </span>
		                                    <span>#{horario.desPersona}</span>
		
		                                    <span style="color: red">  #{utilB.convertTimes(horario.horaInicio)} - #{utilB.convertTimes(horario.horaFinal)}</span>
		                                    <span>#{horario.aula}</span>
		                                </div>                                
		                            </div>
		                        </div>
		                        
		                    </ui:repeat> 
		                   
		                  </div>
		                </ui:repeat>
                </h:panelGroup>	
                </div>
               
      
    		
			 </div>
			 <f:facet name="footer">
                        <div style="display: block;text-align: right">
                            <h:commandLink styleClass="boton-rojo" onclick="dlgHorarioSeccion.hide()">
                            SALIR
                            <f:ajax execute="@this" />
                        </h:commandLink>
                        </div>
                        
              </f:facet>      
               
      
        </p:dialog>
   </h:form>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
        <h:form  id="frmHorarioPersonalDocente" prependId="false" >
        
        
      <p:dialog header="..: HORARIO PERSONAL DOCENTE :.." width="1500" height="650" widgetVar="dlHorarioPersonal" modal="true" closeOnEscape="true" resizable="false" >
      <div  class="paneles" >
     <h:commandLink   class="boton-normal" title="ANTERIOR">
                    <i class="fa fa-chevron-left"/>
                    Anterior
                    <f:ajax execute="@this" render="pnHorarioDocenteCabecera pnHorarioDocenteCuerpo"  listener="#{cargaElectivaB.anteriorP}" />
                </h:commandLink>
                
                <h:commandLink   class="boton-normal" title="SIGUIENTE">
                    <i class="fa fa-chevron-right"/>
                    Siguiente
                    <f:ajax execute="@this" render="pnHorarioDocenteCabecera pnHorarioDocenteCuerpo" listener="#{cargaElectivaB.siguienteP}" />
                </h:commandLink>
      </div>
      <div class="paneles" >
      
      
      
      <h:panelGroup layout="block" id="pnHorarioDocenteCabecera"  >      
				       <div class="cabecera-dia"   >
				        <div  ><i class="fa fa-clock-o" style="font-size: 1.7em;"/></div>
      				  		<ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
	                   
	                        <div   class="#{dia.feriadosL.size() eq 0?'':'FERIADO'}" >                          
	                        <span style="display: block;">#{utilB.listaDiasSemana[dia.dia]}</span>
	                        <span style="display: block;"><h:outputLabel value="#{dia.fecha}" >  <f:convertDateTime  pattern="dd/MM/yyyy" /> </h:outputLabel>  </span>                    
	                       
	                    	</div>
	                  
         			</ui:repeat>
        			</div>
        </h:panelGroup>
        			
       <div style="width: 100%;height: 520px;overflow-x:auto ">	
        		
        	<h:panelGroup layout="block" id="pnHorarioDocenteCuerpo" style="display:block;"  >   
        	
        		
      			<ul class="hora" >
                   
                        <li ><div class="hora-padre"><div class="hora-hijo">8:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">9:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">10:00</div></div></li>
                        <li><div class="hora-padre"><div class="hora-hijo">11:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">12:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">13:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">14:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">15:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">16:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">17:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">18:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">19:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">20:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">21:00</div></div></li>
                        <li ><div class="hora-padre"><div class="hora-hijo">22:00</div></div></li>
      			</ul>
                
		                 <ui:repeat value="#{cargaElectivaB.horarioCabeceraL}" var="dia"  varStatus="index">    
		                    <div class="dia" >
		                        
		                   
		                  	<ui:repeat value="#{dia.horarioCuerpoL}" var="horario">
		                      <div style="height: #{horario.alto}px;top: #{horario.top}px;" class="celda #{horario.desTipoClase}" data-curso="#{horario.curso}" title="#{horario.desTipoClase}"  >
		                            <div  style="display: table;height: 100%;width: 100%;z-index: 1">
		                                <div  style="display: table-cell;vertical-align: middle">
		                                    <span style="color: #008000">#{horario.desCarrera}</span>
		                                    <span ><b>#{horario.desCurso}</b> </span>
		                                    <span>#{horario.seccion} - #{horario.aula}</span>
		
		                                    <span style="color: red">  #{utilB.convertTimes(horario.horaInicio)} - #{utilB.convertTimes(horario.horaFinal)}</span>
		                                </div>                                
		                            </div>
		                        </div>
		                        
		                    </ui:repeat> 
		                   
		                  </div>
		                </ui:repeat>
                </h:panelGroup>	
                </div>
               
      
    		
			 </div>
			 <f:facet name="footer">
                        <div style="display: block;text-align: right">
                            <h:commandLink onclick="dlHorarioPersonal.hide()">
                            SALIR
                            <f:ajax execute="@this" />
                        </h:commandLink>
                        </div>
                        
              </f:facet>
			</p:dialog>
			</h:form>
			
			
			
			
			<h:form id="frmRecuperacion" prependId="false">
			
			<p:dialog widgetVar="dlRecuperacion"  header="..: RECUPERACION Y REPROGRAMACION :.." width="750" modal="true" resizable="false" closeOnEscape="true"  style="background-color:#eeeeee" >
			<div  style="overflow:auto; " >
			<h:panelGroup   layout="block" id="pnCursoSeccionDocente" style="width:#{cargaElectivaB.recuperacionCursoSeccionDocenteL.size()*270}px " >
			
			
				<ui:repeat  value="#{cargaElectivaB.recuperacionCursoSeccionDocenteL}" var="itemCursoSeccion">
					<h:commandLink>
					<div class=" column paneles" style="border:1px solid #{cargaElectivaB.recuperacionCursoSeccionDocente eq itemCursoSeccion ?'red':'silver'};width: 250px;padding: 2px 4px ">
						#{itemCursoSeccion.carrera.descripcion}
						<br />
						#{itemCursoSeccion.seccion.descripcion} -  #{itemCursoSeccion.turno.descripcion} 
						<br />
						#{itemCursoSeccion.cursoSeccionDocente.curso} - #{itemCursoSeccion.curso.descripcion}
						
						
					</div>
					
					
					<f:ajax  execute="@this" render=":frmRecuperacion:tbReprogramacion :frmRecuperacion:pnCursoSeccionDocente" listener="#{cargaElectivaB.seleccionCursoSeccionPersonal(itemCursoSeccion)}" />
					</h:commandLink>
				
				</ui:repeat>
				
			</h:panelGroup>
			</div>
			
			
			
			
			<p:dataTable id="tbReprogramacion" value="#{cargaElectivaB.registrotdL}" var="itemRegistrotd" rowIndexVar="status" scrollable="true" scrollHeight="400" >
				<p:column  headerText="N." width="10" >
					#{status+1}
				</p:column>
				
				<p:column  headerText="Fecha" width="70"  >
					#{itemRegistrotd.fecha}
					
					
				</p:column>
				<p:column  headerText="Dia" width="70"  >
					#{utilB.listaDiasSemana[itemRegistrotd.dia]}					
				</p:column>
				
				<p:column  headerText="Hora Inicio" width="40" >					
					#{utilB.convertTimes(itemRegistrotd.hora_ing)}
				</p:column>
				<p:column  headerText="Hora Final" width="40" >
				
					#{utilB.convertTimes(itemRegistrotd.hora_sal)}
				</p:column>
				<p:column  headerText="Total Hora" width="40" >
				
					 #{(((utilB.dateIff(utilB.convertDateTime(itemRegistrotd.hora_ing),utilB.convertDateTime(itemRegistrotd.hora_sal))/60000)/tipoHoraB.mostrarTipoHora(itemRegistrotd.tipoHora).duracion))}
				</p:column>
				<p:column  headerText="Tema">				
					#{itemRegistrotd.tema}
				</p:column>
				<p:column   width="40" style="text-align:center"  >
				
				<h:commandLink title="REPROGRAMACION" rendered="#{itemRegistrotd.estadoRegistro  eq 0?itemRegistrotd.tipoClase eq 1:false}" >
					<i class="fa fa-plus-square-o" />					
					<f:ajax execute="@this" resetValues="true" render=":frmRecuperacion:cbTipoClaseR :frmRecuperacion:lblFutR :frmRecuperacion:txtFutR     :frmRecuperacion:txtFechaInicioR  :frmRecuperacion:txtHoraInicioR :frmRecuperacion:txtHoraFinalR  :frmRecuperacion:tbListaRecuperacion :frmRecuperacion:txtFechaRecuperacion  :frmRecuperacion:txtTotalMinutos"  listener="#{cargaElectivaB.nuevoRecuperacion(itemRegistrotd)}" />
				</h:commandLink>
				
				<h:commandLink title="Editar" rendered="false" >
					<i class="fa fa-pencil" style="color:green" />
					
					<f:ajax  execute="@this" render=":frmRecuperacion:txtFutR  :frmRecuperacion:txtFechaInicioR  :frmRecuperacion:txtHoraInicioR :frmRecuperacion:txtHoraFinalR  "  listener="#{cargaElectivaB.editarRecuperacion(itemRegistrotd)}" />
				</h:commandLink>				
				<h:commandLink title="Eliminar" rendered="#{itemRegistrotd.tipoClase ne 1}" onclick="return confirmacion(this,'¿ Esta seguro eliminar la reprogramacion?');" >
					<i class="fa fa-times" style="color:red" />					
					<f:ajax  execute="@this" render="tbReprogramacion" listener="#{cargaElectivaB.eliminarRecuperacion(itemRegistrotd)}"  />
				</h:commandLink>				
				</p:column>
				</p:dataTable>
				<f:facet name="footer">
	                        <div style="display: block;text-align: right">
	                            <h:commandLink styleClass="boton-rojo"  onclick="dlRecuperacion.hide()">
		                            SALIR
		                            <f:ajax execute="@this" />
	                        	</h:commandLink>
	                        </div>
	                        
	              </f:facet>
			</p:dialog>
			
			
			<p:dialog widgetVar="dlManteRecuperacion" header="..: RECUPERACION - REPROGRAMACION :.." modal="true" resizable="false" closeOnEscape="true" width="500" >
				<div  class="paneles">
					<h:outputLabel value="Fecha " />
					<h:outputLabel id="txtFechaRecuperacion" value="#{cargaElectivaB.registrotd.fecha}" />
					
					<br />
					<h:outputLabel value="Total Minutos " />	
					<h:outputLabel id="txtTotalMinutos" value="#{cargaElectivaB.registrotd.totalMinutos()}" />
				</div>
			
				<h:outputLabel   value="TIPO CLASE" />
				<h:selectOneMenu id="cbTipoClaseR" value="#{cargaElectivaB.registrotm.tipoClase}">
					<f:selectItem itemLabel="RECUPERACION"  itemValue="2" /> 
					<f:selectItem itemLabel="REPROGRAMACION" itemValue="3" />
					<f:ajax  execute="@this" render="txtFutR lblFutR"   /> 
				</h:selectOneMenu>
				<br />
				<h:outputLabel  id="lblFutR"  value="#{cargaElectivaB.registrotm.tipoClase eq 2?'F.U.T':'INFORME'}" />
				<h:inputText id="txtFutR" value="#{cargaElectivaB.registrotm.fut}" maxlength="10"  style="#{ component.valid ? '' : 'border-color:red;'}"  required="true"  />
				<br />
				<h:outputLabel value="TIPO HORA" />      
                    <h:selectOneMenu id="cbTipoHoraR" value="#{cargaElectivaB.registrotm.tipoHora}" required="true" >
                        <f:selectItem itemLabel="--Selecciona--" />
                        <f:selectItems value="#{cargaElectivaB.tipoHoraL}" var="tipoHora" itemLabel="#{tipoHora.descripcion} - #{tipoHora.duracion}" itemValue="#{tipoHora.tipoHora}" />
                        <f:ajax execute="@this"  />
                    </h:selectOneMenu>
                    <br />
				<h:outputLabel  value="FECHA INICIO" />
				<p:calendar id="txtFechaInicioR"  value="#{cargaElectivaB.registrotm.fecha_inicio}"  mindate="#{cargaElectivaB.registrotd.fecha}" pattern="dd-MM-yyyy"  mask="true" required="true" />
				
				<br />
				<h:outputLabel  value="HORA INICIO" />
				<p:calendar  id="txtHoraInicioR" value="#{cargaElectivaB.registrotm.hora_inicio}"  size="8" minHour="8" stepMinute="5" mask="true"   pattern="HH:mm" timeOnly="true" showButtonPanel="true" required="true"  >
				<p:ajax event="dateSelect" process="@this"  update="txtHoraFinalR" />
				</p:calendar>
				
				<h:outputLabel  value="HORA FINAL" />
				<p:calendar id="txtHoraFinalR" value="#{cargaElectivaB.registrotm.hora_fin}" size="8" minHour="#{cargaElectivaB.registrotm.hora_inicio.hours}" stepMinute="5" mask="true" pattern="HH:mm" timeOnly="true"   showButtonPanel="true"  required="true"  />
				<br  />
				<div class="paneles" >
				<h:commandLink styleClass="boton-normal" >
					<i class="fa fa-plus" />
					AGREGAR
					<f:ajax execute="@this txtFutR  txtFechaInicioR txtHoraInicioR txtHoraFinalR cbTipoHoraR cbTipoClaseR" render="txtFutR tbListaRecuperacion txtFechaInicioR txtHoraInicioR txtHoraFinalR btAceptarR"  listener="#{cargaElectivaB.agregarRecuperacion}" />
				</h:commandLink>
				</div>
				<p:dataTable id="tbListaRecuperacion" value="#{cargaElectivaB.registrotmL}" var="itemRegistroTM"  rowIndexVar="status">
				
				<p:column headerText="N." width="10">
					#{status+1}
				</p:column>
			
				<p:column headerText="Fecha" >
				
			
					<h:outputLabel value="#{itemRegistroTM.fecha_inicio}" >
					<f:convertDateTime pattern="EEEEE dd MMMM yyyy" ></f:convertDateTime>
					
					</h:outputLabel>
					
				</p:column>
				<p:column headerText="Hora Inicio" width="50">
				<h:outputLabel value="#{utilB.convertTimes(itemRegistroTM.hora_inicio)}" />
					
				</p:column>
				
				<p:column headerText="Hora Final" width="50">
					<h:outputLabel value="#{utilB.convertTimes(itemRegistroTM.hora_fin)}" />
				
				</p:column>
				<p:column headerText="Minutos" width="50">
					 <h:outputLabel value="#{itemRegistroTM.totalMinutos()}" />
				
				</p:column>
				
				<p:column  width="20">
				<h:commandLink title="Eliminar" >
					<i class="fa fa-times" style="color: red" />
					<f:ajax  execute="@this" render="tbListaRecuperacion :frmRecuperacion:btAceptarR" listener="#{cargaElectivaB.quitarRecuperacion(status)}" />
				</h:commandLink>
				
				</p:column>
				
				   <p:columnGroup type="footer">
		            <p:row>
		                <p:column colspan="4" style="text-align:right" footerText="Total Minutos:" />
		                <p:column footerText="#{cargaElectivaB.totalMinutos}" />
		            </p:row>
		        </p:columnGroup>
				</p:dataTable>
				
			
				
				<f:facet name="footer">
                        <div style="display: block;text-align: right">
                        <h:commandLink id="btAceptarR" styleClass="boton-verde" disabled="#{cargaElectivaB.registrotmL.size() eq 0}" >
                            ACEPTAR
                            <f:ajax execute="@this tbListaRecuperacion"  render=":frmRecuperacion:tbReprogramacion" listener="#{cargaElectivaB.insertarReprogramacion}" />
                        </h:commandLink >
                            <h:commandLink  styleClass="boton-rojo" onclick="dlManteRecuperacion.hide()">
                            CANCELAR
                            <f:ajax execute="@this" render="txtFutR  txtFechaInicioR txtHoraInicioR txtHoraFinalR cbTipoHoraR cbTipoClaseR"  resetValues="true" />
                        </h:commandLink>
                        </div>
                        
              </f:facet>
			</p:dialog>
			
			
			
		
			
			
			</h:form>
      </ui:define>
      
      
    </ui:composition>

